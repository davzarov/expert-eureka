<div class="col m8">
  {% if categorias %}
  <div class="row">
    <div class="col s12">
      <ul class="tabs">
        {% for categoria in categorias %}
        <li class="tab col s3">
          <a class="active" href="#categoria{{categoria.id}}">{{categoria.nombre}}</a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% for categoria in categorias %}
    <div id="categoria{{categoria.id}}" class="col s12">
      <div class="row">
        {% if categoria.get_productos %}
          {% for producto in categoria.get_productos %}
          <div class="col m4 s12">
            <div class="card-panel hoverable">
              {% if producto.imagen %}
              <img class="responsive-img" src="{{producto.imagen.url}}">
              {% else %}
              <img class="responsive-img" src="{% static 'img/noimage.jpg' %}">
              {% endif %}
              <span>{{producto.nombre}}<br>Cantidad: {{producto.cantidad}}</span>
            </div>
          </div>
          {% endfor %}
        {% else %}
        <div class="col s12">
          <div class="card z-depth-0">
            <div class="card-content">
              <span class="card-title center-align">No existen productos para esta categor√≠a</span>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="col s12">
    <div class="card z-depth-0">
      <div class="card-content">
        <span class="card-title center-align">No existen datos</span>
      </div>
    </div>
  </div>
  {% endif %}
</div>

<script>
  const root_el = document.getElementById('app');
  var catalogo = Vue.component('catalogo', {
    data: function () {
      return {
        categorias: {{ categorias|safe }},
      }
    },
    template: `
      <div class="col m8">
        <code>{{categorias}}</code>
        <div class="row">
          <div class="col s12">
            <ul class="tabs">
              <li v-for="(categoria, index) in categorias" :key=index class="tab col s3">
                <a class="active" href="#categoria{{categoria.pk}}">{{categoria.pk}}</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    `,
  });
  var checkout = Vue.component('checkout', {
    data: function () {
      return {
        //
      }
    },
    template: `
      <div class="col m4">
        <ul class="collection">
          <li class="collection-item">
            <span class="title">Title</span>
            <a href="#!" class="secondary-content"><i class="material-icons">grade</i></a>
          </li>
          <li class="collection-item">
            <span class="title">Title</span>
            <a href="#!" class="secondary-content"><i class="material-icons">grade</i></a>
          </li>
        </ul>  
      </div>
    `,
  });
  const app = new Vue({
    delimiters: ['[[', ']]'],
    el: root_el,
    components: {
      catalogo: catalogo,
      checkout: checkout
    }
  });
</script>